#'
#'
#' @export
load_iot <- function(version, year, directory = WIOD_PARAM$dir_data){
dir_file = paste(directory, "\\", version, "\\", version, year, ".rds", sep = "")
print(dir_file)
iot <- readRDS(dir_file)
return(iot)
}
iots <- load_iots("WIOD2013")
iot <- load_iot("WIOD2013", 2000)
change_dir_data("D:/Werk/RUG/Data")
iot <- load_iot("WIOD2013", 2000)
library(WIOD)
change_dir_data("D:/Werk/RUG/Data")
iot <- load_iot("WIOD2013", 2000)
View(load_iot)
View(load_iot)
iot <- load_iot("WIOD2013", 2000)
library(WIOD)
iot <- load_iot("WIOD2013", 2000)
iot <- load_iot("WIOD2013", 2000)
library(WIOD)
iot <- load_iot("WIOD2013", 2000)
change_dir_data("D:/Werk/RUG/Data")
iot <- load_iot("WIOD2013", 2000)
#' @import settings
WIOD_OPTIONS <- options_manager(dir_data = "X:/Projects/WIOD Stata Command/R program/Data")
#' @title
#' Change data directory
#'
#' @description
#' The function changes the directory from where the data is loaded
#'
#' @param newdirectory: the new directory from which to load the data
#'
#' @details
#' One can download the data using download_iots() and then use this function to change the directory with this function.
#' Manual change of the data directory is also possible when loading data.
#'
#' @examples
#' \dontrun{change_dir_data("X://data")}
#'
#' @export
#'@export
change_dir_data <- function(newdirectory){
print(WIOD_OPTIONS(dir_data))
WIOD_OPTIONS(dir_data = newdirectory)
print(WIOD_OPTIONS(dir_data))
}
WIOD_OPTIONS(dir_data)
library(settings)
install.package("settings")
install.packages("settings")
WIOD_OPTIONS <- options_manager(dir_data = "X:/Projects/WIOD Stata Command/R program/Data")
library(settings)
WIOD_OPTIONS <- options_manager(dir_data = "X:/Projects/WIOD Stata Command/R program/Data")
change_dir_data("D:/Werk/RUG/Data")
#' @import settings
WIOD_OPTIONS <- options_manager(dir_data = "X:/Projects/WIOD Stata Command/R program/Data")
#' @title
#' Change data directory
#'
#' @description
#' The function changes the directory from where the data is loaded
#'
#' @param newdirectory: the new directory from which to load the data
#'
#' @details
#' One can download the data using download_iots() and then use this function to change the directory with this function.
#' Manual change of the data directory is also possible when loading data.
#'
#' @examples
#' \dontrun{change_dir_data("X://data")}
#'
#' @export
#'@export
change_dir_data <- function(newdirectory){
print(WIOD_OPTIONS(dir_data))
WIOD_OPTIONS(dir_data = newdirectory)
print(WIOD_OPTIONS(dir_data))
}
change_dir_data("D:/Werk/RUG/Data")
#' @import settings
WIOD_OPTIONS <- options_manager(dir_data = "X:/Projects/WIOD Stata Command/R program/Data")
#' @title
#' Change data directory
#'
#' @description
#' The function changes the directory from where the data is loaded
#'
#' @param newdirectory: the new directory from which to load the data
#'
#' @details
#' One can download the data using download_iots() and then use this function to change the directory with this function.
#' Manual change of the data directory is also possible when loading data.
#'
#' @examples
#' \dontrun{change_dir_data("X://data")}
#'
#' @export
#'@export
change_dir_data <- function(newdirectory){
print(WIOD_OPTIONS(dir_data))
WIOD_OPTIONS('dir_data' = newdirectory)
print(WIOD_OPTIONS(dir_data))
}
change_dir_data("D:/Werk/RUG/Data")
#' @import settings
WIOD_OPTIONS <- options_manager(dir_data = "X:/Projects/WIOD Stata Command/R program/Data")
#' @title
#' Change data directory
#'
#' @description
#' The function changes the directory from where the data is loaded
#'
#' @param newdirectory: the new directory from which to load the data
#'
#' @details
#' One can download the data using download_iots() and then use this function to change the directory with this function.
#' Manual change of the data directory is also possible when loading data.
#'
#' @examples
#' \dontrun{change_dir_data("X://data")}
#'
#' @export
#'@export
change_dir_data <- function(newdirectory){
print(WIOD_OPTIONS$dir_data)
WIOD_OPTIONS("dir_data" = newdirectory)
print(WIOD_OPTIONS$dir_data)
}
change_dir_data("D:/Werk/RUG/Data")
#' @import settings
WIOD_OPTIONS <- options_manager(dir_data = "X:/Projects/WIOD Stata Command/R program/Data")
#' @title
#' Change data directory
#'
#' @description
#' The function changes the directory from where the data is loaded
#'
#' @param newdirectory: the new directory from which to load the data
#'
#' @details
#' One can download the data using download_iots() and then use this function to change the directory with this function.
#' Manual change of the data directory is also possible when loading data.
#'
#' @examples
#' \dontrun{change_dir_data("X://data")}
#'
#' @export
#'@export
change_dir_data <- function(newdirectory){
print(WIOD_OPTIONS("dir_data"))
WIOD_OPTIONS("dir_data" = newdirectory)
print(WIOD_OPTIONS("dir_data"))
}
change_dir_data("D:/Werk/RUG/Data")
library(WIOD)
change_dir_data("D:/Werk/RUG/Data")
iot <- load_iot("WIOD2013", 2000)
#' @import settings
paramEnv <- new.env()
assign('dir_data', "X:/Projects/WIOD Stata Command/R program/Data", envir = paramEnv)
#' @title
#' Change data directory
#'
#' @description
#' The function changes the directory from where the data is loaded
#'
#' @param newdirectory: the new directory from which to load the data
#'
#' @details
#' One can download the data using download_iots() and then use this function to change the directory with this function.
#' Manual change of the data directory is also possible when loading data.
#'
#' @examples
#' \dontrun{change_dir_data("X://data")}
#'
#' @export
#'@export
change_dir_data <- function(newdirectory){
print(get("dir_data", envir = paramEnv))
assign("dir_data", newdirectory, envir = paramEnv)
print(get("dir_data", envir = paramEnv))
}
change_dir_data("hallo")
iot <- load_iot("WIOD2013", 2000)
change_dir_data(D:/Werk/RUG/Data)
change_dir_data("D:/Werk/RUG/Data")
iot <- load_iot("WIOD2013", 2000)
WIOD::paramEnv$dir_data
library(WIOD)
WIOD::paramEnv$dir_data
WIOD::paramEnv
WIOD::paramEnv$dir_data
change_dir_data("D:/Werk/RUG/Data")
WIOD::paramEnv$dir_data
WIOD::paramEnv$dir_data <- "D:/Werk/RUG/Data"
assign("paramEnv", new.env(), envir = WIOD)
WIOD::paramEnv
llibrary(WIOD)
library(WIOD)
WIOD::dir_data
change_dir_data("D")
WIOD::dir_data
library(WIOD)
change_dir_data("D")
detach("package:settings", unload = TRUE)
library(WIOD)
library(WIOD)
force(change_dir_data)
force(dir_data)
library(WIOD)
force(change_dir_data)
cchange_dir_data("D")
change_dir_data("D")
WIOD::paramEnv$dir_data
iot <- load_iot("WIOD2013", 2000)
change_dir_data("D:/Werk/RUG/Data")
iot <- load_iot("WIOD2013", 2000)
change_dir_data("D:/Werk/RUG/Data")
iot <- load_iot("WIOD2013", 2000)
install.packages("devtools")
install.packages("roxygen")
install.packages("roxygen2")
install.packages("tidyr")
library(WIOD)
install.packages(WIOD, repos = "C:/Users/Sybren")
install.packages(WIOD_0.1.zip, repos = "C:/Users/Sybren")
install.packages("WIOD_0.1.zip", repos = "C:/Users/Sybren")
library(WIOD)
iots <- load_iots("WIOD2013")
change_dir_data("C:/Documents/Werk/RUG/Data")
iots <- load_iots("WIOD2013")
change_dir_data("http://www.wiod.org/home")
library(WIOD)
change_dir_data("http://www.wiod.org/home")
iots <- load_iots("WIOD2013")
change_dir_data("http://www.WIOD.org/Rdata")
iots <- load_iots("WIOD2013")
change_dir_data("http://www.WIOD.org/Rdata/Data")
iots <- load_iots("WIOD2013")
# Load the International Input Output Data from CSV files.
# For use in library WIOD
# Created by Sybren Deuzeman
# Maintained by GGDC
# First version: 3 May 2019
# Current Version: 11 june 2019
#' @title
#' Load a single International Input-Output Table.
#'
#' @description
#' Function loads a single internation Input-Output Table (IOT).
#'
#' @param version: version of IOT
#' @param year: year of IOT
#' @param directory: directory to where the input-output tables are stored.
#'
#' @details
#' Versions currently supported are WIOD2013 (World Input Output Database, version 2013),
#' WIOD2016 (World Input Output Database, version 2013)
#' and ICIOT2018 (Inter-Country Input Output Tables, version 2018).
#'
#' To load a time-series of international input-output tables use load_iots()
#'
#' Directory only needs to direct to the main storage directory, right version and year will be taken care of.
#' Default is loading via the internet. Users who use IOTs more often are advised to make a local copy.
#' Local copy of online data can be made via download_iots()
#'
#' @examples
#' \dontrun{Using online data:}
#' iot <- load_iot("WIOD2013", 2000)
#'
#' @examples
#' \dontrun{Using local data:
#' iot <- load_iot("WIOD2013", 2000, directory = "D:/Data")}
#'
#'
#' @export
load_iot <- function(version, year, directory = get("dir_data", envir = paramEnv)){
dir_file = paste(directory, "\\", version, "\\", version, toString(year), ".rds", sep = "")
iot <- readRDS(gzcon(url("dir_file")))
return(iot)
}
iots <- load_iots("WIOD2013")
change_dir_data("http://www.WIOD.org/Rdata/")
iots <- load_iots("WIOD2013")
change_dir_data("http://www.WIOD.org/Rdata")
iots <- load_iots("WIOD2013")
iots <- load_iot("WIOD2013", 2000)
library(WIOD)
iots <- load_iot("WIOD2013", 2000)
iots <- load_iot("WIOD2013", 2000)
library(WIOD)
iots <- load_iot("WIOD2013", 2000)
library(WIOD)
iots <- load_iot("WIOD2013", 2000)
gzcon(url("http://www.wiod.org/RData/WIOD2013/WIOD20131995.rds"))
i <- readRDS(gzcon(url("http://www.wiod.org/RData/WIOD2013/WIOD20131995.rds")))
View(i)
change_dir_data("http://www.wiod.org/Rdata")
iots <- load_iot("WIOD2013", 2000)
change_dir_data("http://www.wiod.org/Rdata")
library(WIOD)
change_dir_data("http://www.wiod.org/Rdata")
change_dir_data("C:/Documents/Werk/RUG/Data")
download_iots('OECD')
download_iots <- function(version, dir_data =  get("dir_data", envir = paramEnv), dir_data_online =  get("dir_data_online", envir = paramEnv)){
years_url <- paste(dir_data_online, "\\", version, "\\", version, toString(years), ".rds", sep = "")
years_local <- paste(dir_data, "\\", version, "\\", version, toString(years), ".rds", sep = "")
years <- readRDS(gzcon(url(years_url)))
curl_download(years_url, years_local)
for (year in years){
download_iot(version, year, dir_data, dir_data_online)
}
}
download_iots('OECD')
library(WIOD)
library(WIOD)
download_iots('OECD')
View(download_iots)
download_iots('OECD')
library(WIOD)
download_iots('OECD')
library(WIOD)
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_iots("OECD")
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_iots("OECD")
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_iots("OECD")
download_iots("WIOD2013")
library(WIOD)
download_iots("WIOD2013")
library(WIOD)
download_iots("WIOD2013")
library(WIOD)
download_iots("WIOD2013")
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_iots("WIOD2013")
download_iots("WIOD2013")
download_iots("WIOD2013")
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_extra_iots("joeg2019", "WIOD2013")
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_extra_iots("joeg2019", "WIOD2013")
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_extra_iots("joeg2019", "WIOD2013")
download_extra_iots("joeg2019", "WIOD2013")
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_extra_iots("joeg2019", "WIOD2013")
download_extra_iots("SEA", "WIOD2013")
readRDS("C:/Documents/Werk/RUG/Data/WIOD2013/WIOD2013_joeg20191995.rds")
install.packages("RCurl")
library(RCurl)
url.exists("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20191995.rds")
library(WIOD)
download_extra_iots("joeg2019", "WIOD2013")
change_dir_data("C:/Documents/Werk/RUG/Data")
download_extra_iots("joeg2019", "WIOD2013")
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_extra_iots("joeg2019", "WIOD2013")
download_extra_iot("joeg2019", "WIOD2013", 2000)
download_extra_iot("joeg2019", "WIOD2013", 2001)
download_extra_iot("joeg2019", "WIOD2013", 1995)
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_extra_iot("joeg2019", "WIOD2013", 1995)
download_extra_iot("joeg2019", "WIOD2013", 1995)
download_extra_iots("joeg2019", "WIOD2013")
download_iots("WIOD2013")
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_iots("WIOD2013")
load_iots("WIOD2013")
iots <- load_iots("WIOD2013")
reset_dir_data()
iots <- load_iots("WIOD2013")
change_dir_data("C:/Documents/Werk/RUG/Data")
iots <- load_iot("WIOD2013", 2000)
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_iots("WIOD2013")
download_extra_iot("joeg2019", "WIOD2013", 1995)
library(WIOD)
download_extra_iot("joeg2019", "WIOD2013", 1996)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_extra_iot("joeg2019", "WIOD2013", 1996)
readRDS(gzcon(url("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20191996.rds")))
readRDS(gzcon(url("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20192000.rds")))
View(iots)
iots <- load_iots("WIOD2013")
load_extra_iots(iots, "joeg2019")
iot <- load_iot("WIOD2013", 2000)
load_extra_iot(iot, "joeg2019\")
_)
_
""
""
iot <- load_extra_iot(iot, "joeg2019")
download_extra_iot("joeg2019", "WIOD2013")
download_extra_iot("joeg2019", "WIOD2013", 2000)
iot <- load_extra_iot(iot, "joeg2019")
View(iot)
iot <- load_iot("WIOD2013", 1996)
iot <- load_extra_iot(iot, "joeg2019")
getURL("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20192000.rds")
getURL("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg201919996.rds")
getURL("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20191996.rds")
getURL("http://www.wiod.org/Rdata/redirect")
getURL("http://www.wiod.org/Rdata/redirect") ==  getURL("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20191996.rds")
getURL("http://www.wiod.org/Rdata/redirect") ==  getURL("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20192000.rds")
req <- curl_fetch_disk('https://cloud.r-project.org/CRAN_mirrorZ.csv')
library(curl)
req <- curl_fetch_disk('https://cloud.r-project.org/CRAN_mirrorZ.csv')
url.exists("http:/hatseflats.nl")
url.exists("http:/www.joop.nl")
url.exists("https://joop.bnnvara.nl/")
url.exists("https://joop.bnnvara.nl")
url.exists("https://joop.bnnvara.nl/index.html")
url.exists("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20192000.rds")
url.exists("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20191996.rds")
help("url.exists")
url.exists("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20191996.rds", .header = TRUE)
url.exists("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20191996.rds")$status
url.exists("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20191996.rds")
url.exists("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20192000.rds", .header = TRUE)
getURL("http://www.wiod.org/Rdata/redirect") ==  getURL("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20191996.rds")
curl_fetch_memory("http://www.wiod.org/Rdata/redirect")
curl_fetch_memory("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20191996.rds")
curl_fetch_memory("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20192000.rds")
curl_fetch_memory("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20191995.rds")
library(WIOD)
iot <- load_iot("WIOD2013", 2000)
iot <- load_extra_iot(iot, "joeg2019")
curl_fetch_memory("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20191995.rds")$type
curl_fetch_memory("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20191995.rds")$type == "text/html"
library(WIOD)
iot <- load_extra_iot(iot, "joeg2019")
library(curl)
library(WIOD)
iot <- load_extra_iot(iot, "joeg2019")
iot <- load_extra_iot(iot, "joeg2019")
library(WIOD)
iot <- load_extra_iot(iot, "joeg2019")
library(WIOD)
iot <- load_extra_iot(iot, "joeg2019")
library(WIOD)
iot <- load_extra_iot(iot, "joeg2019")
help("curl_fetch_memory")
help(curl)
"curl"
help(curl)
library(WIOD)
iot <- load_extra_iot(iot, "joeg2019")
print(curl_fetch_memory("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20191995.rds")$type)
print(is.na(curl_fetch_memory("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20191995.rds")$type))
print(is.na(curl_fetch_memory("http://www.wiod.org/Rdata/WIOD2013/WIOD2013_joeg20192000.rds")$type))
iot <- load_iot("WIOD2013", 2000)
iot <- load_extra_iot(iot, "joeg2019")
is.url("http://www.wiod.org/Rdata\\WIOD2013\\WIOD2013_joeg20192000.rds")
library(utilities)
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
change_dir_data("C:/Documents/Werk/RUG/Data")
download_extra_iots("joeg2019", "WIOD2013")
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_extra_iots("joeg2019", "WIOD2013")
change_dir_data("C:/Documents/Werk/RUG/Data")
download_extra_iots("joeg2019", "WIOD2013")
download_extra_iot("joeg2019", "WIOD2013")
download_extra_iot("joeg2019", "WIOD2013", 2000)
download_extra_iot <- function(extra, version, year, dir_data =  get("dir_data", envir = paramEnv), dir_data_online =  get("dir_data_online", envir = paramEnv)){
dir.create(paste(dir_data, "/" , version, sep = ""), showWarnings = FALSE)
url <- paste(dir_data_online,"/", version, "/", version,"_", extra, year, ".rds", sep = "")
local <-  paste(dir_data, "/", version, "/", version,"_", extra, year, ".rds", sep = "")
if (tolower(substr(url, 1, 4)) == 'http' ){
if (url.exists(url){
if (is.na(curl_fetch_memory(url)$type)){
#Website redirect wrong URLs without proper code
curl_download(url, local)
return(iot)
}
else{
print(paste("Extra data ", extra,  " for year ", iot$year, " not found online.", sep = ""))
}
}
}
}
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_extra_iots("joeg2019", "WIOD2013")
library(WIOD)
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_iot("WIOD2013", 1994)
download_iot("WIOD2013", 1995)
download_iots("WIOD2013")
library(WIOD)
change_dir_data("C:/Documents/Werk/RUG/Data")
download_iots("WIOD2013")
